<!DOCTYPE html>
<html lang=zh-CN>
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="description" content="傅大帅的个人博客">
  <meta name="keywords" content="火柴">
  
    <link rel="icon" href="/images/favicon.png">
  
    
  <title>Python网络爬虫（四）——信息标记与提取方法 | 叮咚火柴的博客</title>
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="/lib/jquery.fancybox.min.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
  <header>
  <div class="header-container">
    <a class="logo" href="/">
      <span>叮咚火柴的博客</span>
    </a>
    <ul class="right-header">
      
        <li class="nav-item">
          
            <a href="/" class="item-link">首页</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/about" class="item-link">关于</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/archives" class="item-link">归档</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/tags" class="item-link">标签</a>
          
        </li>
      
    </ul>
  </div>
</header>

  <main id="post">
  <div class="content">
    <article>
        <section class="content markdown-body">
          <h1>Python网络爬虫（四）——信息标记与提取方法</h1>
          <div class="post-meta">
            <i class="fa fa-calendar" aria-hidden="true"></i> <time>2017年05月15日</time>
            
            
              | 
                  <i class="fa fa-tags" aria-hidden="true"></i>
                
               
  <a href="/tags/#学习笔记" class="tag">学习笔记</a>

  <a href="/tags/#python" class="tag">python</a>


            
          </div>
          <h1 id="信息的标记"><a href="#信息的标记" class="headerlink" title="信息的标记"></a>信息的标记</h1><p><img src="http://i.imgur.com/4exF3H7.png" alt="image"><br>作用：</p>
<ul>
<li>标记后的信息可形成信息组织结构，增加了信息维度</li>
<li>标记的结构与信息一样具有重要价值</li>
<li>标记后的信息可用于通信、存储或展示</li>
<li>标记后的信息更利于程序理解和运用<h2 id="HTML的信息标记"><a href="#HTML的信息标记" class="headerlink" title="HTML的信息标记"></a>HTML的信息标记</h2><img src="http://i.imgur.com/ozTPwuf.png" alt="image"><br><img src="http://i.imgur.com/wpK66jZ.png" alt="image"><h2 id="信息标记有哪些种类呢？"><a href="#信息标记有哪些种类呢？" class="headerlink" title="信息标记有哪些种类呢？"></a>信息标记有哪些种类呢？</h2>信息标记的三种形式</li>
<li>XML</li>
<li>JSON</li>
<li>YAML<h3 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h3><img src="http://i.imgur.com/0iqwkrS.png" alt="image"></li>
</ul>
<p>空元素的缩写形式<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;img src=“china.jpg” size=“10” /&gt;</span><br></pre></td></tr></table></figure></p>
<p>注释书写形式<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!‐‐ This is a comment, very useful ‐‐&gt;</span><br></pre></td></tr></table></figure></p>
<p>常见书写形式<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;name&gt; … &lt;/name&gt;</span><br><span class="line">&lt;name /&gt;</span><br><span class="line">&lt;!‐‐ ‐‐&gt;</span><br></pre></td></tr></table></figure></p>
<p>XML实例<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;person&gt;</span><br><span class="line">    &lt;firstName&gt;Tian&lt;/firstName&gt;</span><br><span class="line">    &lt;lastName&gt;Song&lt;/lastName&gt;</span><br><span class="line">    &lt;address&gt;</span><br><span class="line">        &lt;streetAddr&gt;中关村南大街5号&lt;/streetAddr&gt;</span><br><span class="line">        &lt;city&gt;北京市&lt;/city&gt;</span><br><span class="line">        &lt;zipcode&gt;100081&lt;/zipcode&gt;</span><br><span class="line">    &lt;/address&gt;</span><br><span class="line">    &lt;prof&gt;Computer System&lt;/prof&gt;&lt;prof&gt;Security&lt;/prof&gt;</span><br><span class="line">&lt;/person&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h3><p><img src="http://i.imgur.com/w0Rcul3.png" alt="image"><br>常见书写形式<br><img src="http://i.imgur.com/QR8k27e.png" alt="image"><br><img src="http://i.imgur.com/LSrxgrg.png" alt="image"><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">“key” : “value”</span><br><span class="line">“key” : [“value1”, “value2”]</span><br><span class="line">“key” : &#123;“subkey” : “subvalue”&#125;</span><br></pre></td></tr></table></figure></p>
<p>JSON实例<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">“firstName” : “Tian” ,</span><br><span class="line">“lastName” : “Song” ,</span><br><span class="line">“address” : &#123;</span><br><span class="line">            “streetAddr” : “中关村南大街5号” ,</span><br><span class="line">            “city” : “北京市” ,</span><br><span class="line">            “zipcode” : “100081”</span><br><span class="line">            &#125; ,</span><br><span class="line">“prof” : [ “Computer System” , “Security” ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="YAML"><a href="#YAML" class="headerlink" title="YAML"></a>YAML</h3><p><img src="http://i.imgur.com/CuJgk37.png" alt="image"><br>缩进表达所属关系<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">name :</span><br><span class="line">    newName : 北京理工大学</span><br><span class="line">    oldName : 延安自然科学院</span><br></pre></td></tr></table></figure></p>
<p>表达并列关系<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">name :</span><br><span class="line">‐北京理工大学</span><br><span class="line">‐延安自然科学院</span><br></pre></td></tr></table></figure></p>
<p>| 表达整块数据# 表示注释<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">text: | #学校介绍</span><br><span class="line">北京理工大学创立于1940年，前身是延安自然科学院，是中国共产党创办的第一所理工科大学，</span><br><span class="line">毛泽东同志亲自题写校名，李富春、徐特立、李强等老一辈无产阶级革命家先后担任学校主要领</span><br><span class="line">导。学校是新中国成立以来国家历批次重点建设的高校，首批进入国家“211程”和“985工程”建</span><br><span class="line">设行列；在全球具有广泛影响力的英国QS“世界大学500强”中，位列入选的中国大陆高校第15</span><br><span class="line">位。学校现隶属于工业和信息化部。</span><br></pre></td></tr></table></figure></p>
<p>常见书写形式<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">key : value</span><br><span class="line"></span><br><span class="line">key : #Comment</span><br><span class="line">‐value1</span><br><span class="line">‐value2</span><br><span class="line"></span><br><span class="line">key :</span><br><span class="line">    subkey : subvalue</span><br></pre></td></tr></table></figure></p>
<p>YAML实例<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">firstName : Tian</span><br><span class="line">lastName : Song</span><br><span class="line">address :</span><br><span class="line">    streetAddr : 中关村南大街5号</span><br><span class="line">    city : 北京市</span><br><span class="line">    zipcode : 100081</span><br><span class="line">prof :</span><br><span class="line">‐Computer System</span><br><span class="line">‐Security</span><br></pre></td></tr></table></figure></p>
<h3 id="三种信息标记形式的比较"><a href="#三种信息标记形式的比较" class="headerlink" title="三种信息标记形式的比较"></a>三种信息标记形式的比较</h3><p>XML 最早的通用信息标记语言，可扩展性好，但繁琐。Internet上的信息交互与传递。<br>JSON 信息有类型，适合程序处理(js)，较XML简洁。移动应用云端和节点的信息通信，无注释。<br>YAML 信息无类型，文本信息比例最高，可读性好。各类系统的配置文件，有注释易读。</p>
<h1 id="信息提取的一般方法"><a href="#信息提取的一般方法" class="headerlink" title="信息提取的一般方法"></a>信息提取的一般方法</h1><p>从标记后的信息中提取所关注的内容，XML，JSON，YAML(标记, 信息)</p>
<h2 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a>方法一：</h2><p>完整解析信息的标记形式，再提取关键信息，XML JSON YAML<br>需要标记解析器，例如：bs4库的标签树遍历<br>优点：信息解析准确<br>缺点：提取过程繁琐，速度慢</p>
<h2 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h2><p>无视标记形式，直接搜索关键信息，对信息的文本查找函数即可<br>优点：提取过程简洁，速度较快<br>缺点：提取结果准确性与信息内容相关</p>
<h2 id="融合方法："><a href="#融合方法：" class="headerlink" title="融合方法："></a>融合方法：</h2><p>结合形式解析与搜索方法，提取关键信息<br>需要标记解析器及文本查找函数</p>
<h1 id="基于bs4库的HTML内容查找方法"><a href="#基于bs4库的HTML内容查找方法" class="headerlink" title="基于bs4库的HTML内容查找方法"></a>基于bs4库的HTML内容查找方法</h1><h2 id="lt-gt-find-all"><a href="#lt-gt-find-all" class="headerlink" title="&lt;&gt;.find_all()"></a>&lt;&gt;.find_all()</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;&gt;.find_all(name, attrs, recursive, string, **kwargs)</span><br></pre></td></tr></table></figure>
<p>name:对标签名称的检索字符串返回一个列表类型，存储查找的结果<br>attrs:对标签属性值的检索字符串，可标注属性检索<br>recursive:是否对子孙全部检索，默认True<br>string:&lt;&gt;…&lt;/&gt;中字符串区域的检索字符串<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;tag&gt;(..) 等价于&lt;tag&gt;.find_all(..)</span><br><span class="line">soup(..) 等价于soup.find_all(..)</span><br></pre></td></tr></table></figure></p>
<h2 id="扩展方法"><a href="#扩展方法" class="headerlink" title="扩展方法"></a>扩展方法</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明 </th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;&gt;.find()</td>
<td>搜索且只返回一个结果，同.find_all()参数</td>
</tr>
<tr>
<td>&lt;&gt;.find_parents()</td>
<td>在先辈节点中搜索，返回列表类型，同.find_all()参数</td>
</tr>
<tr>
<td>&lt;&gt;.find_parent()</td>
<td>在先辈节点中返回一个结果，同.find()参数</td>
</tr>
<tr>
<td>&lt;&gt;.find_next_siblings()</td>
<td>在后续平行节点中搜索，返回列表类型，同.find_all()参数</td>
</tr>
<tr>
<td>&lt;&gt;.find_next_sibling()</td>
<td>在后续平行节点中返回一个结果，同.find()参数</td>
</tr>
<tr>
<td>&lt;&gt;.find_previous_siblings()</td>
<td>在前序平行节点中搜索，返回列表类型，同.find_all()参数</td>
</tr>
<tr>
<td>&lt;&gt;.find_previous_sibling()</td>
<td>在前序平行节点中返回一个结果，同.find()参数</td>
</tr>
</tbody>
</table>

        </section>
    </article>
    
        <!-- disqus 评论框 start -->
        <div class="comment">
            <div id="disqus_thread" class="disqus-thread">
              <i>加载评论框需要翻墙</i>
            </div>
        </div>
        <!-- disqus 评论框 end -->
    
    
        <!-- livere 评论框 start -->
        <div class="comment">
            <div id="lv-container" data-id="city" data-uid="your_livere_uid"></div>
        </div>
        <!-- livere 评论框 end -->
        
  </div>
  <aside>
    
    <div class="toc-container">
        <h1>目录</h1>
        <div class="content">
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#信息的标记"><span class="toc-number">1.</span> <span class="toc-text">信息的标记</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#HTML的信息标记"><span class="toc-number">1.1.</span> <span class="toc-text">HTML的信息标记</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#信息标记有哪些种类呢？"><span class="toc-number">1.2.</span> <span class="toc-text">信息标记有哪些种类呢？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#XML"><span class="toc-number">1.2.1.</span> <span class="toc-text">XML</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSON"><span class="toc-number">1.2.2.</span> <span class="toc-text">JSON</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#YAML"><span class="toc-number">1.2.3.</span> <span class="toc-text">YAML</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三种信息标记形式的比较"><span class="toc-number">1.2.4.</span> <span class="toc-text">三种信息标记形式的比较</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#信息提取的一般方法"><span class="toc-number">2.</span> <span class="toc-text">信息提取的一般方法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#方法一："><span class="toc-number">2.1.</span> <span class="toc-text">方法一：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#方法二："><span class="toc-number">2.2.</span> <span class="toc-text">方法二：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#融合方法："><span class="toc-number">2.3.</span> <span class="toc-text">融合方法：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#基于bs4库的HTML内容查找方法"><span class="toc-number">3.</span> <span class="toc-text">基于bs4库的HTML内容查找方法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#lt-gt-find-all"><span class="toc-number">3.1.</span> <span class="toc-text">&lt;&gt;.find_all()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#扩展方法"><span class="toc-number">3.2.</span> <span class="toc-text">扩展方法</span></a></li></ol></li></ol>
        </div>
    </div>
    
  </aside>
</main>

<!-- disqus 公共JS代码 -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES * * */
  var disqus_shortname = "dingdongmatch";
  var disqus_identifier = "http://yoursite.com/2017/05/15/Python网络爬虫（四）——信息标记与提取方法/";
  var disqus_url = "http://yoursite.com/2017/05/15/Python网络爬虫（四）——信息标记与提取方法/";

  isAgent(getDisqus)

  // determine user agent in China
  function isAgent(cb) {
    var url = '//graph.facebook.com/feed?callback=h';
    var xhr = new XMLHttpRequest();
    var called = false;
    xhr.open('GET', url);
    xhr.onreadystatechange = function() {
      if (xhr.readyState === 4 && xhr.status === 200) {
      called = true;
      cb(true);
      }
    };
    xhr.send();
    // timeout 1s, this facebook API is very fast.
    setTimeout(function() {
      if (!called) {
      xhr.abort();
      cb(false)
      }
    }, 1000);
  }

  function getDisqus(isAgent) {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; 
    dsq.async = true
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq)
  }
</script>
<!-- disqus 公共JS代码 end -->


<script type="text/javascript">
  (function(d, s) {
      var j, e = d.getElementsByTagName(s)[0];

      if (typeof LivereTower === 'function') { return; }

      j = d.createElement(s);
      j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
      j.async = true;

      e.parentNode.insertBefore(j, e);
  })(document, 'script');
</script>


  <footer>
  <div class="copyright">
    <div>
      &copy; 2019 | Powered by <a href="https://hexo.io" target="_blank">Hexo</a>&nbsp
    </div>
    <div>
      Theme by <a href="https://github.com/lewis-geek/hexo-theme-Aath" target="_blank">Aath</a>
    </div>
  </div>
</footer>


<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script src="/lib/in-view.min.js"></script>
<script src="/lib/lodash.min.js"></script>
<script>
  var isDown = true
  var oldY = 0
  inView.offset(50)

  document.body.addEventListener('touchstart', function(){});
  
  window.addEventListener('scroll', _.throttle(e => {
    var currentY = window.scrollY
    if((oldY - currentY) < 0) {
      isDown = true
    } else {
      isDown = false
    }
    oldY = currentY
  }, 250))

  $("article img").each(function() {
      var strA = "<a data-fancybox='gallery' href='" + this.src + "'></a>";
      $(this).wrapAll(strA);
  });

  $('.toc-link').each(function() {
      var href = $(this).attr("href");
      
      inView(href).on('exit', () => {
        if (isDown) {
          handleActive(href)
        }
      })

      inView(href).on('enter', () => {
        if (!isDown) {
          handleActive(href)
        }
      })

      this.onclick = function(e) {
        var pos = $(href).offset().top - 10;
        $("html,body").animate({scrollTop: pos}, 300);
        setTimeout(() => {
          handleActive(href)
        }, 350)
        return false
      }
  })

  function handleActive(href) {
    document.querySelectorAll('.toc-link').forEach(elm => {
      elm.classList.remove('active')
    })
    document.querySelector(".toc [href='"+ href +"']").classList.add('active')
  }
</script>
<script src="/lib/jquery.fancybox.min.js"></script>


</body>
</html>
